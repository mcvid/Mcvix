 <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>Mcvix | Feel the vibe</title>
    <link rel="shortcut icon" href="image copy 6.png" type="image/x-icon">
    <link rel="stylesheet" href="index.css">
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>
<body>
  <div id="auth-screen" class="auth-screen">

    <div class="auth-form" id="login-form">
      <h2>Welcome Back</h2>
      <input style="width: 380px;"
        type="email"
        id="email"
        placeholder="Email"
        oninput="validateLogin()"
      />
      <div class="password-wrapper">
        <input
          type="password"
          id="password"
          placeholder="Password (min 8 chars)"
          oninput="validateLogin()"
        />
        <span class="toggle-password" onclick="togglePassword('password', this)">
         
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="eye-icon" viewBox="0 0 16 16">
            <path d="M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8z"/>
            <path d="M8 5.5a2.5 2.5 0 1 1 0 5 2.5 2.5 0 0 1 0-5z"/>
          </svg>
        </span>
      </div>
      <button id="login-btn" onclick="login()" style="margin-top: 20px;">Login</button>
      <div id="g-signin2" style="margin-top: 20px; width: 400px;"></div>
      <p>
        Don’t have an account?
        <span onclick="showSignup()" class="switch-link">Sign up</span>
      </p>
    </div>

    <div class="auth-form" id="signup-form" style="display:none;">
      <h2>Create Account</h2>
      <input
        type="email"
        id="signupEmail"
        placeholder="Email"
        oninput="validateSignup()"
      />
      <div class="password-wrapper">
        <input
          type="password"
          id="signupPassword"          
          placeholder="Password (min 8 chars)"
          oninput="validateSignup()"
        />
        <span class="toggle-password" onclick="togglePassword('signupPassword', this)">
          <!-- your eye SVG -->
        </span>
      </div>
      <button id="signup-btn" onclick="signup()">Sign Up</button>
      <p>
        Have an account?
        <span onclick="showLogin()" class="switch-link">Log in</span>
      </p>
    </div>
    
  </div>

  <div id="app" style="display:none;">
  <header class="head">
     <div class="top-bar">
      <img class="logo" src="image copy 6.png" >
      <div class="search-container">
        <input
          type="search"
          placeholder="What do you want to play?"
          class="search-bar"
          id="searchInput"/>
        
        <i class="fa-solid fa-magnifying-glass search-icon"></i>
        <i class="fa-solid fa-xmark clear-icon" id="clearBtn"></i>
      </div>
      <button class="premium-btn">Premium</button>
  <div class="tooltip-container">
    <i class="fa-regular fa-bell notification-icon"></i>
    <span class="custom-tooltip">What's New</span>
  </div>
  <div class="tooltip-container">
    <i class="fa-solid fa-user-group friends-icon"></i>
    <span class="custom-tooltip">Friends</span>
  </div>
  <div class="tooltip-container">
    <div class="profile-menu-container" onclick="toggleDropdown()">
      <div class="profile-avatar" id="profileToggle">M</div>
      <div class="profile-dropdown" id="profileDropdown">
        <ul>
          <li><i class="fa-regular fa-user"></i> Profile</li>
          <li><i class="fa-solid fa-circle-user"></i> Account</li>
          <li><i class="fa-solid fa-gear"></i> Settings</li>
          <hr class="lg">
          <li><i class="fa-solid fa-right-from-bracket"></i> Logout</li>
        </ul>
      </div>
    </div>
    <span class="custom-tooltip">Mcvid</span>
  </div>
     </div>
  </header>
<div class="main-layout">  
<div class="side-bar">
      <div class="buttons">
          <button class="bts" onclick="setActive(this)">Playlists</button>
          <button class="bts" onclick="setActive(this)">Library</button>
      </div>
      <nav class="nav-links">
        <div class="nav-item">
          <a href="#" data-section="home"><i class="fa fa-home"></i> Home</a>
        </div>
        <div class="nav-item">
          <a href="#" data-section="library"><i class="fas fa-book"></i> Your Library</a>
        </div>
        <div class="nav-item">
          <a href="#" data-section="create"><i class="fas fa-plus-square"></i> Create Playlist</a>
        </div>
        <div class="nav-item">
          <a href="#" data-section="liked"><i class="fas fa-heart"></i> Liked Songs</a>
        </div>
      </nav>
</div>
<div class="main-content">
<section id="home" class="section active">
  <div class="filter-bar">
    <button class="bts">All</button>
    <button class="bts">Music</button>
  </div>
  <div>
    <div class="playlist-grid-wrapper">
      <div class="playlist-grid">
        <div class="playlist-card">
          <img src="/image copy 16.png" alt="Liked Songs">
          <span>Liked Songs</span>
          <div class="play-hover"><i class="fas fa-play"></i></div>
        </div>
        <div class="playlist-card">
          <img src="/image copy 15.png" alt="Twinkle Twinkle">
          <span>Twinkle Twinkle</span>
          <div class="play-hover"><i class="fas fa-play"></i></div>
        </div>
        <div class="playlist-card">
          <img src="energetic.png" alt="Energetic Coding Mix">
          <span>Energetic Coding Mix</span>
          <div class="play-hover"><i class="fas fa-play"></i></div>
        </div>
        <div class="playlist-card">
          <img src="chill.png" alt="Chill Coding Mix">
          <span>Chill Coding Mix</span>
          <div class="play-hover"><i class="fas fa-play"></i></div>
        </div>
        <div class="playlist-card">
          <img src="/image copy 13.png" alt="Justin Bieber">
          <span>Justin Bieber</span>
          <div class="play-hover"><i class="fas fa-play"></i></div>
        </div>
    </div>
  <h2>Made For You</h2>
  <div class="daily-mix-container">
    <button class="arrow left" onclick="scrollSlider(this, 'left')">&#8249;</button>
    <div class="daily-mix-slider" id="MixSlider">
    <div class="daily-mix-card">
      <div class="image-wrapper">
        <img src="/image copy 9.png" alt="Daily Mix Cover">
        <img src="/image copy 6.png" class="spotify-icon" alt="Spotify Logo">
        <div class="mix-labels">
          <span class="mix-type">For You</span>
          <span class="mix-number">01</span>
        </div>
        <div class="play-icon">
          <i class="fas fa-play"></i>
        </div>
      </div>
      <p class="mix-description">
        <span class="name">Alan Walker </span><br>Find out the best and more
      </p>
    </div>
    <div class="daily-mix-card">
      <div class="image-wrapper">
        <img src="/image copy 10.png" alt="Daily Mix Cover">
        <img src="/image copy 6.png" class="spotify-icon" alt="Spotify Logo">
        <div class="mix-labels">
          <span class="mix-type">For You</span>
          <span class="mix-number">02</span>
        </div>
        <div class="play-icon">
          <i class="fas fa-play"></i>
        </div>
      </div>
      <p class="mix-description">
        <span class="name">Adele </span><br>Find out the best and more
      </p>
    </div>
    <div class="daily-mix-card">
      <div class="image-wrapper">
        <img src="/image copy 19.png" alt="Daily Mix Cover">
        <img src="/image copy 6.png" class="spotify-icon" alt="Spotify Logo">
        <div class="mix-labels">
        </div>
        <div class="play-icon">
          <i class="fas fa-play"></i>
        </div>
      </div>
      <p class="mix-description">
        <span class="name">Ice Spice</span><br>Find out the best and more
      </p>
    </div>
    <div class="daily-mix-card">
      <div class="image-wrapper">
        <img src="/image copy 11.png" alt="Daily Mix Cover">
        <img src="/image copy 6.png" class="spotify-icon" alt="Spotify Logo">
        <div class="mix-labels">
          <span class="mix-type">For You</span>
          <span class="mix-number">03</span>
        </div>
        <div class="play-icon">
          <i class="fas fa-play"></i>
        </div>
      </div>
      <p class="mix-description">
        <span class="name">Imagine Dragons </span><br>Find out the best and more
      </p>
    </div>
    <div class="daily-mix-card">
      <div class="image-wrapper">
        <img src="/image copy 17.png" alt="Daily Mix Cover">
        <img src="/image copy 6.png" class="spotify-icon" alt="Spotify Logo">
        <div class="mix-labels">
          <span class="mix-type">Daily Mix</span>
          <span class="mix-number">01</span>
        </div>
        <div class="play-icon">
          <i class="fas fa-play"></i>
        </div>
      </div>
      <p class="mix-description">
        <span class="name">Central Cee </span><br>Find out the best and more
      </p>
    </div>
    <div class="daily-mix-card">
      <div class="image-wrapper">
        <img src="/image copy 12.png" alt="Daily Mix Cover">
        <img src="/image copy 6.png" class="spotify-icon" alt="Spotify Logo">
        <div class="mix-labels">
          <span class="mix-type">For You</span>
          <span class="mix-number">04</span>
        </div>
        <div class="play-icon">
          <i class="fas fa-play"></i>
        </div>
      </div>
      <p class="mix-description">
        <span class="name">Fik Famieca </span><br>Find out the best and more
      </p>
    </div>
    <div class="daily-mix-card">
      <div class="image-wrapper">
        <img src="/image copy 14.png" alt="Daily Mix Cover">
        <img src="/image copy 6.png" class="spotify-icon" alt="Spotify Logo">
        <div class="mix-labels">
          </div>
        <div class="play-icon">
          <i class="fas fa-play"></i>
        </div>
      </div>
      <p class="mix-description">
        <span class="name">Alan Walker </span><br>Find out the best and more
      </p>
    </div>
    <div class="daily-mix-card">
      <div class="image-wrapper">
        <img src="/image copy 8.png" alt="Daily Mix Cover">
        <img src="/image copy 6.png" class="spotify-icon" alt="Spotify Logo">
        <div class="mix-labels">
          </div>
        <div class="play-icon">
          <i class="fas fa-play"></i>
        </div>
      </div>
      <p class="mix-description">
        <span class="name">Alan Walker </span><br>Find out the best and more
      </p>
    </div>
    <div class="daily-mix-card">
      <div class="image-wrapper">
        <img src="/image copy 17.png" alt="Daily Mix Cover">
        <img src="/image copy 6.png" class="spotify-icon" alt="Spotify Logo">
        <div class="mix-labels">
        </div>
        <div class="play-icon">
          <i class="fas fa-play"></i>
        </div>
      </div>
      <p class="mix-description">
        <span class="name">Central Cee </span><br>Find out the best and more
      </p>
    </div>
    <div class="daily-mix-card">
      <div class="image-wrapper">
        <img src="/image copy 13.png" alt="Daily Mix Cover">
        <img src="/image copy 6.png" class="spotify-icon" alt="Spotify Logo">
        <div class="mix-labels">
        </div>
        <div class="play-icon">
          <i class="fas fa-play"></i>
        </div>
      </div>
      <p class="mix-description">
        <span class="name">Alan Walker </span><br>Find out the best and more
      </p>
    </div>
  </div>
  <button class="arrow right" onclick="scrollSlider(this, 'right')">&#8250;</button>
</div>
<h2>Recommended</h2>
<div class="daily-mix-container">
  <button class="arrow left" onclick="scrollSlider(this, 'left')">&#8249;</button>
  <div class="daily-mix-slider" id="Made">
  <div class="daily-mix-card">
    <div class="image-wrapper">
      <img src="/image copy 9.png" alt="Daily Mix Cover">
      <img src="/image copy 6.png" class="spotify-icon" alt="Spotify Logo">
      <div class="mix-labels">
      </div>
      <div class="play-icon">
        <i class="fas fa-play"></i>
      </div>
    </div>
    <p class="mix-description">
      <span class="name">Alan Walker </span><br>Find out the best and more
    </p>
  </div>
  <div class="daily-mix-card">
    <div class="image-wrapper">
      <img src="/image copy 17.png" alt="Daily Mix Cover">
      <img src="/image copy 6.png" class="spotify-icon" alt="Spotify Logo">
      <div class="mix-labels">
      </div>
      <div class="play-icon">
        <i class="fas fa-play"></i>
      </div>
    </div>
    <p class="mix-description">
      <span class="name">Central Cee </span><br>Find out the best and more
    </p>
  </div>
  <div class="daily-mix-card">
    <div class="image-wrapper">
      <img src="/image copy 10.png" alt="Daily Mix Cover">
      <img src="/image copy 6.png" class="spotify-icon" alt="Spotify Logo">
      <div class="mix-labels">
      </div>
      <div class="play-icon">
        <i class="fas fa-play"></i>
      </div>
    </div>
    <p class="mix-description">
      <span class="name">Adele </span><br>Find out the best and more
    </p>
  </div>
  <div class="daily-mix-card">
    <div class="image-wrapper">
      <img src="/image copy 11.png" alt="Daily Mix Cover">
      <img src="/image copy 6.png" class="spotify-icon" alt="Spotify Logo">
      <div class="mix-labels">
      </div>
      <div class="play-icon">
        <i class="fas fa-play"></i>
      </div>
    </div>
    <p class="mix-description">
      <span class="name">Alan Walker </span><br>Find out the best and more
    </p>
  </div>
  <div class="daily-mix-card">
    <div class="image-wrapper">
      <img src="/image copy 19.png" alt="Daily Mix Cover">
      <img src="/image copy 6.png" class="spotify-icon" alt="Spotify Logo">
      <div class="mix-labels">
      </div>
      <div class="play-icon">
        <i class="fas fa-play"></i>
      </div>
    </div>
    <p class="mix-description">
      <span class="name">Ice Spice</span><br>Find out the best and more
    </p>
  </div>
  <div class="daily-mix-card">
    <div class="image-wrapper">
      <img src="/image copy 12.png" alt="Daily Mix Cover">
      <img src="/image copy 6.png" class="spotify-icon" alt="Spotify Logo">
      <div class="mix-labels">
      </div>
      <div class="play-icon">
        <i class="fas fa-play"></i>
      </div>
    </div>
    <p class="mix-description">
      <span class="name">Alan Walker </span><br>Find out the best and more
    </p>
  </div>
  <div class="daily-mix-card">
    <div class="image-wrapper">
      <img src="/image copy 14.png" alt="Daily Mix Cover">
      <img src="/image copy 6.png" class="spotify-icon" alt="Spotify Logo">
      <div class="mix-labels">
      </div>
      <div class="play-icon">
        <i class="fas fa-play"></i>
      </div>
    </div>
    <p class="mix-description">
      <span class="name">Alan Walker </span><br>Find out the best and more
    </p>
  </div>
  <div class="daily-mix-card">
    <div class="image-wrapper">
      <img src="/image copy 8.png" alt="Daily Mix Cover">
      <img src="/image copy 6.png" class="spotify-icon" alt="Spotify Logo">
      <div class="mix-labels">
      </div>
      <div class="play-icon">
        <i class="fas fa-play"></i>
      </div>
    </div>
    <p class="mix-description">
      <span class="name">Alan Walker </span><br>Find out the best and more
    </p>
  </div>
  <div class="daily-mix-card">
    <div class="image-wrapper">
      <img src="/image copy 17.png" alt="Daily Mix Cover">
      <img src="/image copy 6.png" class="spotify-icon" alt="Spotify Logo">
      <div class="mix-labels">
      </div>
      <div class="play-icon">
        <i class="fas fa-play"></i>
      </div>
    </div>
    <p class="mix-description">
      <span class="name">Central Cee </span><br>Find out the best and more
    </p>
  </div>
  <div class="daily-mix-card">
    <div class="image-wrapper">
      <img src="/image copy 13.png" alt="Daily Mix Cover">
      <img src="/image copy 6.png" class="spotify-icon" alt="Spotify Logo">
      <div class="mix-labels">
      </div>
      <div class="play-icon">
        <i class="fas fa-play"></i>
      </div>
    </div>
    <p class="mix-description">
      <span class="name">Alan Walker </span><br>Find out the best and more
    </p>
  </div>
</div>
<button class="arrow right" onclick="scrollSlider(this, 'right')">&#8250;</button>
</div>
<h2>Recommended</h2>
<div class="daily-mix-container">
  <button class="arrow left" onclick="scrollSlider(this, 'left')">&#8249;</button>
  <div class="daily-mix-slider" id="Made">
  <div class="daily-mix-card">
    <div class="image-wrapper">
      <img src="/image copy 9.png" alt="Daily Mix Cover">
      <img src="/image copy 6.png" class="spotify-icon" alt="Spotify Logo">
      <div class="mix-labels">
      </div>
      <div class="play-icon">
        <i class="fas fa-play"></i>
      </div>
    </div>
    <p class="mix-description">
      <span class="name">Alan Walker </span><br>Find out the best and more
    </p>
  </div>
  <div class="daily-mix-card">
    <div class="image-wrapper">
      <img src="/image copy 17.png" alt="Daily Mix Cover">
      <img src="/image copy 6.png" class="spotify-icon" alt="Spotify Logo">
      <div class="mix-labels">
      </div>
      <div class="play-icon">
        <i class="fas fa-play"></i>
      </div>
    </div>
    <p class="mix-description">
      <span class="name">Central Cee </span><br>Find out the best and more
    </p>
  </div>
  <div class="daily-mix-card">
    <div class="image-wrapper">
      <img src="/image copy 10.png" alt="Daily Mix Cover">
      <img src="/image copy 6.png" class="spotify-icon" alt="Spotify Logo">
      <div class="mix-labels">
      </div>
      <div class="play-icon">
        <i class="fas fa-play"></i>
      </div>
    </div>
    <p class="mix-description">
      <span class="name">Adele </span><br>Find out the best and more
    </p>
  </div>
  <div class="daily-mix-card">
    <div class="image-wrapper">
      <img src="/image copy 11.png" alt="Daily Mix Cover">
      <img src="/image copy 6.png" class="spotify-icon" alt="Spotify Logo">
      <div class="mix-labels">
      </div>
      <div class="play-icon">
        <i class="fas fa-play"></i>
      </div>
    </div>
    <p class="mix-description">
      <span class="name">Alan Walker </span><br>Find out the best and more
    </p>
  </div>
  <div class="daily-mix-card">
    <div class="image-wrapper">
      <img src="/image copy 19.png" alt="Daily Mix Cover">
      <img src="/image copy 6.png" class="spotify-icon" alt="Spotify Logo">
      <div class="mix-labels">
      </div>
      <div class="play-icon">
        <i class="fas fa-play"></i>
      </div>
    </div>
    <p class="mix-description">
      <span class="name">Ice Spice</span><br>Find out the best and more
    </p>
  </div>
  <div class="daily-mix-card">
    <div class="image-wrapper">
      <img src="/image copy 12.png" alt="Daily Mix Cover">
      <img src="/image copy 6.png" class="spotify-icon" alt="Spotify Logo">
      <div class="mix-labels">
      </div>
      <div class="play-icon">
        <i class="fas fa-play"></i>
      </div>
    </div>
    <p class="mix-description">
      <span class="name">Alan Walker </span><br>Find out the best and more
    </p>
  </div>
  <div class="daily-mix-card">
    <div class="image-wrapper">
      <img src="/image copy 14.png" alt="Daily Mix Cover">
      <img src="/image copy 6.png" class="spotify-icon" alt="Spotify Logo">
      <div class="mix-labels">
      </div>
      <div class="play-icon">
        <i class="fas fa-play"></i>
      </div>
    </div>
    <p class="mix-description">
      <span class="name">Alan Walker </span><br>Find out the best and more
    </p>
  </div>
</div>
<button class="arrow right" onclick="scrollSlider(this, 'right')">&#8250;</button>
</div>
<h2>New Releases</h2>
<div class="card-row">
  <div class="card">
    <img src="cover3.jpg" alt="Album">
    <p>New Vibes</p>
  </div>
</div>
</section>
<section id="search" class="section">
  <h2>Search</h2>
</section>
<section id="library" class="section">
  <h2>Your Library</h2>
</section>
</div>
<section class="right-panel" id="home-right-panel" >
</section>
</div>   
<div class="playing">
</div>
<div class="bottom-nav">
<a href="/index.html" class="nav-item" data-section="home">
  <i class="fa fa-home"></i>
  <span class="label">Home</span>
</a>
<a href="library.html" class="nav-item" data-section="library">
  <i class="fas fa-book"></i>
  <span class="label">Library</span>
</a>
<a href="#" class="nav-item" data-section="create">
  <i class="fas fa-plus-square"></i>
  <span class="label">Create</span>
</a>
<a href="#" class="nav-item" data-section="liked">
  <i class="fas fa-heart"></i>
  <span class="label">Liked</span>
</a>
</div>
  </div>
  
<script src="https://accounts.google.com/gsi/client" async defer></script>
<script src="index.js"></script>
<script>
function signup() {
  const e = signupEmail.value.trim();
  const p = signupPassword.value;

  if (!validEmail(e)) {
    alert("Enter a valid email.");
    return;
  }
  if (p.length < 8) {
    alert("Password must contain at least 8 characters");
    return;
  }
  if (localStorage.getItem(e)) {
    alert("That account already exists. Please log in.");
    return showLogin();
  }

  // Save the new account
  localStorage.setItem(e, JSON.stringify({ password: p }));
  // Mark as logged in
  localStorage.setItem("loggedIn", "true");
  localStorage.setItem("currentUser", e);

  showApp();
}

  function togglePassword(fieldId, toggleIcon) {
    const input = document.getElementById(fieldId);
    if (!input) return;
  
    if (input.type === 'password') {
      input.type = 'text';
    } else {
      input.type = 'password';
    }
  }function handleCredentialResponse(response) {
    const payload = JSON.parse(atob(response.credential.split('.')[1]));
    const email = payload.email;
  
    // Optionally: store user info in localStorage
    localStorage.setItem("googleUser", JSON.stringify({ email }));
    localStorage.setItem("loggedIn", "true");
  
    // Show the app
    showApp();
  }
  
  window.addEventListener("DOMContentLoaded", () => {
    // Existing init logic...
  
    // Initialize Google Sign-In
    if (window.google && google.accounts && google.accounts.id) {
      google.accounts.id.initialize({
        client_id: '64228559712369m3g4j8t49if8u2dp626fi3e02h25u.apps.googleusercontent.com',
        callback: handleCredentialResponse,
      });
  
      google.accounts.id.renderButton(
        document.getElementById("g-signin2"),
        { theme: "outline", size: "large" }
      );
  
      // Try auto-login if already signed in
      google.accounts.id.prompt(); // This shows the One Tap if allowed
    }
  });
  
  
    function signup() {
      const e = signupEmail.value.trim();
      const p = signupPassword.value;
      if (localStorage.getItem(e)) {
        alert("That account already exists. Please log in.");
        return showLogin();
      }
      localStorage.setItem(e, JSON.stringify({ password: p }));
      localStorage.setItem(STORAGE_KEY, "true");
      showApp();
    }
  
    // — Login logic —
    function login() {
      const e = emailInput.value.trim();
      const p = passwordInput.value;
      const rec = JSON.parse(localStorage.getItem(e) || 'null');
      if (!rec) {
        alert("No such account – please sign up.");
        return showSignup();
      }
      if (rec.password !== p) {
        return alert("Incorrect password.");
      }
      localStorage.setItem(STORAGE_KEY, "true");
      showApp();
    }
  
    // — Logout (if you need it) —

  
    // — Initialization on page load —
    window.addEventListener('DOMContentLoaded', () => {
      // Grab elements
      authScreen     = document.getElementById("auth-screen");
      loginForm      = document.getElementById("login-form");
      signupForm     = document.getElementById("signup-form");
      app            = document.getElementById("app");
      emailInput     = document.getElementById("email");
      passwordInput  = document.getElementById("password");
      signupEmail    = document.getElementById("signupEmail");
      signupPassword = document.getElementById("signupPassword");
      loginBtn       = document.getElementById("login-btn");
      signupBtn      = document.getElementById("signup-btn");
  
      // Wire up real‑time validation
      emailInput.addEventListener('input',   validateLogin);
      passwordInput.addEventListener('input',validateLogin);
      signupEmail.addEventListener('input',   validateSignup);
      signupPassword.addEventListener('input',validateSignup);
  
      // Wire up toggle links
      document.querySelector('.switch-link[onclick*="showSignup"]').addEventListener('click', showSignup);
      document.querySelector('.switch-link[onclick*="showLogin"]').addEventListener('click', showLogin);
  
      // Wire up buttons
      loginBtn.addEventListener('click', login);
      signupBtn.addEventListener('click', signup);
  
      // Decide initial view
      if (localStorage.getItem(STORAGE_KEY) === "true") {
        showApp();
      } else {
        showLogin();
      }
    });
    const validEmail = e => /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e);
  
  function showLogin() {
    loginForm.style.display    = 'block';
    signupForm.style.display   = 'none';
    authScreen.style.display   = 'flex';
    app.style.display          = 'none';
  }
  function showSignup() {
    loginForm.style.display    = 'none';
    signupForm.style.display   = 'block';
    authScreen.style.display   = 'flex';
    app.style.display          = 'none';
  }
  function showApp() {
    authScreen.style.display   = 'none';
    app.style.display          = 'block';
  }
  
  // Real‑time validation
  function validateLogin() {
    loginBtn.disabled = !(
      validEmail(email.value.trim()) &&
      password.value.length >= 8
    );
  }
  function validateSignup() {
    signupBtn.disabled = !(
      validEmail(signupEmail.value.trim()) &&
      signupPassword.value.length >= 8
    );
  }
  
  // Signup: store a simple record and mark logged in
  function signup() {
    const e = signupEmail.value.trim();
    const p = signupPassword.value;
    if (localStorage.getItem(e)) {
      return alert("That account exists already – please log in.");
    }
    localStorage.setItem(e, JSON.stringify({password:p}));
    localStorage.setItem("loggedIn","true");
    showApp();
  }
  
  // Login: check against storage, then mark logged in
  function login() {
    const e = email.value.trim();
    const p = password.value;
    const rec = JSON.parse(localStorage.getItem(e) || 'null');
    if (!rec)     return alert("No such account – please sign up.");
    if (rec.password !== p) return alert("Wrong password.");
    localStorage.setItem("loggedIn","true");
    showApp();
  }
  function login() {
    const e = emailInput.value.trim();
    const p = passwordInput.value;
  
    if (p.length < 8) {
      return alert("Password must contain at least 8 characters");
    }
  
    const stored = JSON.parse(localStorage.getItem(e) || 'null');
    if (!stored) return alert("Account doesn't exist. Please sign up first.");
    if (stored.password !== p) return alert("Incorrect password.");
  
    document.getElementById('auth-screen').style.display = 'none';
    document.getElementById('app').style.display = 'block';
  }
  function signup() {
    const e = signupEmail.value.trim();
    const p = signupPassword.value;
  
    if (p.length < 8) {
      return alert("Password must contain at least 8 characters");
    }
  
    if (localStorage.getItem(e)) {
      return alert("Account already exists. Please log in.");
    }
  
    localStorage.setItem(e, JSON.stringify({ password: p }));
    document.getElementById('auth-screen').style.display = 'none';
    document.getElementById('app').style.display = 'block';
  }
  
  function logout() {
    localStorage.removeItem("loggedIn");
    showLogin();
  }
  if (loggedIn==="true") showApp();
  else showLogin();
  
  
  window.addEventListener('DOMContentLoaded',()=>{
    window.authScreen     = document.getElementById("auth-screen");
    window.loginForm      = document.getElementById("login-form");
    window.signupForm     = document.getElementById("signup-form");
    window.app            = document.getElementById("app");
    window.email          = document.getElementById("email");
    window.password       = document.getElementById("password");
    window.signupEmail    = document.getElementById("signupEmail");
    window.signupPassword = document.getElementById("signupPassword");
    window.loginBtn       = document.getElementById("login-btn");
    window.signupBtn      = document.getElementById("signup-btn");
  
    // Attach real‑time checks
    email.addEventListener('input',   validateLogin);
    password.addEventListener('input',validateLogin);
    signupEmail.addEventListener('input',   validateSignup);
    signupPassword.addEventListener('input',validateSignup);
  
    // Show app if already logged in
    if (localStorage.getItem("loggedIn")==="true") {
      showApp();
    } else {
      showLogin();
    }
  });
  
  
    sessionStorage.setItem('loggedIn', 'yes');
    if (sessionStorage.getItem('loggedIn')) {
    document.getElementById('auth-screen').style.display = 'none';
    document.getElementById('app').style.display         = 'block';
  }
    function validateEmail(e) {
      return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e);
    }
    function login() {
    const e = emailInput.value.trim();
    const p = passwordInput.value;
    const stored = JSON.parse(localStorage.getItem(e) || 'null');
    if (!stored)          return alert("Account doesn't exist. Please sign up first.");
    if (stored.password !== p) return alert("Incorrect password.");
  
    // Hide auth, show app
    document.getElementById('auth-screen').style.display = 'none';
    document.getElementById('app').style.display         = 'block';
  }
  
  function signup() {
    const e = signupEmail.value.trim();
    const p = signupPassword.value;
    if (localStorage.getItem(e)) {
      return alert("Account already exists. Please log in.");
    }
    localStorage.setItem(e, JSON.stringify({ password: p }));
  
    // Hide auth, show app
    document.getElementById('auth-screen').style.display = 'none';
    document.getElementById('app').style.display         = 'block';
  }
    // — Toggle between forms —
    function showSignup() {
      loginForm.style.display  = 'none';
      signupForm.style.display = 'block';
    }
    function showLogin() {
      signupForm.style.display = 'none';
      loginForm.style.display  = 'block';
    }
  
    // — Enable/disable buttons in real time —
    function validateLogin() {
      const ok = validateEmail(emailInput.value)
              && passwordInput.value.length >= 8;
      loginBtn.disabled = !ok;
    }
  
    function validateSignup() {
      const ok = validateEmail(signupEmail.value)
              && signupPassword.value.length >= 8;
      signupBtn.disabled = !ok;
    }
  
  {
      // Store user credential under their email key
      localStorage.setItem(e, JSON.stringify({ password: p }));
      // Immediately go to home
      window.location.href = 'home.html';
    }
  
  
  
    // — Google Sign‑In callback (optional) —
    function handleCredentialResponse(response) {
      const payload = JSON.parse(atob(response.credential.split('.')[1]));
      const e = payload.email;
      if (!localStorage.getItem(e)) {
        return alert("No account found for " + e);
      }
      window.location.href = 'index.html';
    }
  
    // — On load, wire up everything —
    window.addEventListener('DOMContentLoaded', () => {
      // Element refs
      window.emailInput     = document.getElementById('email');
      window.passwordInput  = document.getElementById('password');
      window.signupEmail    = document.getElementById('signupEmail');
      window.signupPassword = document.getElementById('signupPassword');
      window.loginBtn       = document.getElementById('login-btn');
      window.signupBtn      = document.getElementById('signup-btn');
      window.loginForm      = document.getElementById('login-form');
      window.signupForm     = document.getElementById('signup-form');
  
      // Attach validation handlers
      emailInput.addEventListener('input', validateLogin);
      passwordInput.addEventListener('input', validateLogin);
      signupEmail.addEventListener('input', validateSignup);
      signupPassword.addEventListener('input', validateSignup);
  
      // Initialize Google Sign‑In if you’re using it:
      if (window.google && google.accounts && google.accounts.id) {
        google.accounts.id.initialize({
          client_id: 'YOUR_GOOGLE_CLIENT_ID',
          callback: handleCredentialResponse
        });
        google.accounts.id.renderButton(
          document.getElementById('g-signin2'),
          { theme: 'outline', size: 'large' }
        );
      }
    });
  </script>

</body>
</html>
